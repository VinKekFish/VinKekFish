# ПЕРЕДЕЛАТЬ!
Состояния нужно привести к более простым, которые описываются IsInit1 и IsInit2.

# Состояния объекта
## Группа 1
    Не готов к криптографическим операциям
    Готов к криптографическим операциям
    В процессе криптографической операции
    Очищен
    Уничтожен

Состояние "Очищен" предполагается проходным, ведущим сразу же в "Не готов к криптографическим операциям"

## Группа 2
    Не проинициализирован
    Предварительно проинициализирован
    Полностью проинициализирован
    Очищен
    Уничтожен

Состояние "Очищен" предполагается проходным, ведущим сразу же в "Не проинициализирован"
Состояние "Не проинициализирован" предполагает отсутствие в объекте каких-либо конфиденциальных данных

При изменении этой группы изменить декларацию ./VinKekFish_k1_base_20210419_состояния.fmc


## Группа 4
    Данные не готовы
    Данные готовы

# Рекомендуемые переходы между состояниями

Рекомендуемый порядок вызовов

    Вызов конструктора VinKekFish_k1_base_20210419
        1: Не готов к криптографическим операциям
        2: Не проинициализирован
    Вызов первого метода инициализации Init1
        1: Не готов к криптографическим операциям
        2: Предварительно проинициализирован
    Вызов второго метода инициализации Init2
        1: Готов к криптографическим операциям
        2: Полностью проинициализирован
    Далее должны следовать вызовы методов-потомков
        1: В процессе криптографической операции и Готов к криптографическим операциям
        2: Полностью проинициализирован
    Если необходимо
        Вызов Clear
            1: Не готов к криптографическим операциям
            2: Не проинициализирован
        Возврат к началу списка (метод Init1)
    Вызов Dispose
        1: Уничтожен
        2: Уничтожен


# Допумстимые состояния

## Начальные состояния
    1:Не готов к криптографическим операциям
    2:Не проинициализирован
    3:Данные не готовы

При вызове методов, переводящих из одного состояния в другое, не допускается одновременный вызов (из другого потока) любого другого метода

В состоянии "В процессе криптографической операции" не допустим вызов других операций, которые пытаются перевести объект в это же состояние

Для обеспечения многопоточности нужно вручную использовать любой объект синхронизации (либо делать вызовы только в одном потоке)

## Конечные состояния

    1:Уничтожен
    2:Уничтожен
    3:Данные не готовы

# Допустимые переходы

Здесь движение от корня к листьям (это допустимые переходы)

## Группа 1
    Не готов к криптографическим операциям
        Готов к криптографическим операциям
        Очищен
    Готов к криптографическим операциям
        В процессе криптографической операции
        Очищен
    В процессе криптографической операции
        Готов к криптографическим операциям
    Очищен
        Не готов к криптографическим операциям
        Уничтожен
    Уничтожен
        _

## Группа 2
    Не проинициализирован
        Предварительно проинициализирован
        Очищен
    Предварительно проинициализирован
        Полностью проинициализирован
        Очищен
    Полностью проинициализирован
        Очищен
    Очищен
        Не проинициализирован
        Уничтожен
    Уничтожен
        _

## Группа 4
    Любые переходы

# Переменные в состояниях
    (при переходах в какие состояния изменяется переменная)

## Группа 2

    Не проинициализирован
        isInited1 = false
        isInited2 = false
    Предварительно проинициализирован
        isInited1 = true
        isInited2 = false
    Полностью проинициализирован
        isInited1 = true
        isInited2 = true
    Очищен
        isInited1 = false
        isInited2 = false
    Уничтожен
        isInited1 = false
        isInited2 = false

## Группа 4

    Данные не готовы
        isHaveOutputData = false
    Данные готовы
        isHaveOutputData = true

## Переходы переменных осуществляются в следующих состояниях

### isInited1

    isInited1 = false
        Не проинициализирован
        Очищен
    isInited1 = true
        Предварительно проинициализирован

### isInited2
    isInited2 = false
        Не проинициализирован
        Очищен
    isInited2 = true
        Полностью проинициализирован

# Переходы из состояний
(движение от листьев к корню; вызов в состоянии любого листа, выход из функции - состояние корня, передвижение по узлам происходит внутри функции)

## Конструктор VinKekFish_k1_base_20210419
Переводит объект в состояние
    1:Не готов к криптографическим операциям
    2:Не проинициализирован
    4:Данные не готовы

## Метод Init1

## Группа 1
    Не готов к криптографическим операциям
        Не готов к криптографическим операциям
        Очищен
            Готов к криптографическим операциям
## Группа 2
    Предварительно проинициализирован
        Не проинициализирован
            _    (то есть, вызов может быть из состояния "Не проинициализирован")
            Очищен
                _
                Полностью проинициализирован
                Предварительно проинициализирован

### Группа 4
    Данные не готовы
        Данные не готовы
        Данные готовы

## Метод Init2
### Группа 1
    Готов к криптографическим операциям
        Не готов к криптографическим операциям

### Группа 2
    Полностью проинициализирован
        Предварительно проинициализирован

### Группа 4
    Данные готовы
        Данные не готовы
        Данные готовы

Здесь была исправлена ошибка: после Init2 объект проинициализирован ключом и ОВИ и готов к тому, чтобы отдать первый блок данных.

## Метод ClearState

### Группа 1
    Не готов к криптографическим операциям
        Не готов к криптографическим операциям
        Готов к криптографическим операциям
        Очищен

### Группа 2
    Предварительно проинициализирован
        Предварительно проинициализирован
        Готов к криптографическим операциям
        Очищен

### Группа 4
    Данные не готовы
        Данные не готовы
        Данные готовы

## Метод Clear

### Группа 1
    Не готов к криптографическим операциям
        Очищен
            Не готов к криптографическим операциям
            Готов к криптографическим операциям
            Очищен

### Группа 2
    Не проинициализирован
	    Очищен
            Не проинициализирован
            Предварительно проинициализирован
            Полностью проинициализирован
            Очищен

### Группа 4
    Данные не готовы
        Данные не готовы
        Данные готовы

### GenStandardPermutationTables
    Это статический метод. Не влияет на состояния объектов, может быть вызван независимо от состояний объектов.

### outputData

### Группа 1
    Готов к криптографическим операциям
        Готов к криптографическим операциям

### Группа 2
    Полностью проинициализирован
        Полностью проинициализирован

### Группа 4
    Данные не готовы
        Данные готовы

### DoStep

### Группа 1
    Готов к криптографическим операциям
        В процессе криптографической операции
            Готов к криптографическим операциям

### Группа 2
    Полностью проинициализирован
        Полностью проинициализирован

### Группа 4
    Данные готовы
        Данные не готовы
        Данные готовы

## Метод Dispose

### Группа 1
    Не проинициализирован
        Не готов к криптографическим операциям
        Готов к криптографическим операциям
        Очищен

### Группа 2

    Не проинициализирован
        Очищен
            Не проинициализирован
            Предварительно проинициализирован
            Полностью проинициализирован
            _

### Группа 4

    Данные не готовы
        Данные не готовы
        Данные готовы

## Деструктор ~VinKekFish_k1_base_20210419

## Группа 1
    Уничтожен
        Не готов к криптографическим операциям

## Группа 2
    Уничтожен
        Не проинициализирован

## Группа 4
    Данные не готовы
        Данные не готовы


